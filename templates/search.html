<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-9FR7K2YVNR"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-9FR7K2YVNR'); </script>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Search</title>
        <link rel="icon" href="/src/image/favicon.ico" type="image/x-icon"/>
		<!-- Bootstrap core CSS -->
		<link href="/src/css/bootstrap.min.css" rel="stylesheet">
		<!-- Custom styles for this template -->
		<link href="/src/css/signin.css" rel="stylesheet">
		<script src="/src/js/jquery.min.js"></script>
	</head>

	<body class="text-center">
		<form class="form-signin">
            {%csrf_token%}
			<img class="mb-4" src="/src/image/logo-search.jpg" alt="" width="390" height="140.4">
			<!--h1 class="h3 mb-3 font-weight-normal" style="margin-left: -15%; margin-right: -15%;">Please enter the author's name</h1-->
            <br />
			<p id="error" style="color: red">{{ error }}</p>
            <div style="display: flex; width: 60%; margin-left: 20%; margin-bottom: 1%;">
				<!-- <img src="/src/image/search.png" style="order: -1; height: 38px;"> -->
				<div class="card" style="height: 50px; width: 30%; border-top-left-radius: 24px; border-bottom-left-radius: 24px;">
					<div id="scholar-field" class="card-body" style="padding-top: 13px; border-right: none;">
						{{ field }} Scholar
					</div>
				</div>
                <input name="name" type="text" class="form-control" placeholder="Please enter the author's name" autofocus="" style="height: 50px; width: 70%; border-top-right-radius: 24px; border-bottom-right-radius: 24px;">
            </div>
			<br />
            <div style="display: inline;">
				{% if field %}
                	<a id="listLink" class="btn btn-primary" href="/list?field={{ field }}" style="background-color: #f8f9fa; border-color: #f8f9fa; color: #3c4043; margin-right: 10px;">Scholar List</a>
				{% else %}
					<a id="listLink" class="btn btn-primary" href="/list?field=visualization" style="background-color: #f8f9fa; border-color: #f8f9fa; color: #3c4043; margin-left: 10px;">Scholar List</a>
				{% endif %}
				<a id="searchLink" class="btn btn-primary" style="background-color: #f8f9fa; border-color: #f8f9fa; color: #3c4043;">Scholar Search</a>
				<script>
					$("#listLink")
						.on("mouseover", () => $("#listLink").css("border-color", "#a9a9a9"))
						.on("mouseout", () => $("#listLink").css("border-color", "#f8f9fa"));
					$("#searchLink")
						.on("mouseover", () => $("#searchLink").css("border-color", "#a9a9a9"))
						.on("mouseout", () => $("#searchLink").css("border-color", "#f8f9fa"));
				</script>
			</div>
			<br />
			<br />
			<p class="mt-5 mb-3 text-muted">© 2023-2024</p>
			<a href=" " target="_blank">京ICP备2022000473号-2</a>
			<br />
			<br />
			<p style="white-space: pre-wrap; text-align: center;">Please send any enquiry/feedback to: <b>geneticflowcontact@gmail.com</b>,
and see our <a href="reference">KDD/VIS 2023 paper</a> for more details.
			</p>
		</form>
		<script type="text/javascript">
			// $("#listLink").click(function(event) {
			// 	event.preventDefault();		// form表单当button在里面时，会默认发送GET请求
			// 	var field = $("input[name='field']:checked").val();
			// 	$("#error").empty();
			// 	// 当跳转失败停留在原页面时，url现在已经发生改变，
			// 	// 很奇怪的是此时不管发送什么请求window.location.href都会带上"list/"这个后缀，所以只能判断此时url是否包括它，包括就删去
			//  if (window.location.href.includes("list/")) {
			// 		window.location.href = "?field=" + field;
			// 	}
			// 	else {
			// 		window.location.href = "list/?field=" + field;
			// 	}
			// })
			var field = "{{ field }}";
			if (field == 'acl') {
				$("#scholar-field").text("NLP Scholar");
			}
			else if (field == 'visualization') {
				$("#scholar-field").text("Visualization" + " Scholar");
			}
			$("#searchLink").click(function(event) {
				event.preventDefault();
				name = $(".form-control").val();
				if (name == '') {
					$("#error").text("Please input the name");
				}
				else {
					$("#error").empty();
					var field = "{{ field }}";
					console.log(field);
					window.location.href = "list?field=" + field + "&name=" +name;
				}
			});
		</script>
	</body>
</html>